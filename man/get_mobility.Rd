% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mobility.R
\name{get_mobility}
\alias{get_mobility}
\title{Mobility Data Functions for Spatial Analysis}
\usage{
get_mobility(
  dates = "2023-01-01",
  level = "dist",
  max_rows = 10000,
  zones_filter = NULL,
  region_filter = NULL
)
}
\arguments{
\item{dates}{Character vector of dates. Options:
\itemize{
\item Single date: "2023-01-01"
\item Date range: c("2023-01-01", "2023-01-07")
\item Default: "2023-01-01"
}}

\item{level}{Character. Spatial aggregation level:
\itemize{
\item "dist" - Districts (default, recommended for users)
\item "muni" - Municipalities (detailed, larger dataset)
}}

\item{max_rows}{Numeric. Maximum number of rows to return for memory management
(default: 10000 for memory-efficient processing). If dataset is larger, random sampling is applied.}

\item{zones_filter}{Character vector. Optional filter for specific zone IDs to download.
If NULL (default), downloads all zones. Use this to reduce download size:
\itemize{
\item For districts: c("28079", "08019") for Madrid and Barcelona districts
\item For municipalities: c("28079001", "08019001") for specific municipalities
}}

\item{region_filter}{Character. Optional filter by region/province name or code.
Examples: "Madrid", "Barcelona", "28" (Madrid province), "08" (Barcelona province).
This automatically identifies relevant zone IDs for filtering.}
}
\value{
Data frame with mobility data containing:
\itemize{
\item origin - Origin zone identifier
\item dest - Destination zone identifier
\item date - Date of trips
\item n_trips - Number of trips between origin and destination
}
}
\description{
Essential functions for accessing and analyzing Spanish mobility data
with automatic spatial mapping capabilities.
Get mobility matrix with filtering capabilities
}
\details{
Downloads Spanish origin-destination mobility data from MITMA
with memory-efficient defaults and automatic data management.
Includes filtering options to download subsets of data for specific zones.

This function automatically:
\itemize{
\item Downloads data from Spanish government MITMA database
\item Filters out zero-trip records for efficiency
\item Applies memory management by sampling large datasets
\item Standardizes column names for consistency
\item Provides analytical step-by-step messaging
}

Data represents aggregated mobility patterns based on mobile phone data,
providing insights into population movement between administrative zones.
}
\examples{
\dontrun{
# Basic usage - download all zones (default)
mobility <- get_mobility(dates = "2023-01-01", level = "dist")

# Filter by specific zones (reduces download size)
madrid_barcelona <- get_mobility(
  dates = "2023-01-01", 
  level = "dist",
  zones_filter = c("28079", "08019")  # Madrid and Barcelona districts
)

# Filter by region name (automatically finds relevant zones)
madrid_mobility <- get_mobility(
  dates = "2023-01-01",
  level = "dist", 
  region_filter = "Madrid"
)

# Filter by province code (smaller subset)
valencia_mobility <- get_mobility(
  dates = "2023-01-01",
  level = "dist",
  region_filter = "46"  # Valencia province code
)

# Date range with filtering
week_data <- get_mobility(
  dates = c("2023-01-01", "2023-01-07"), 
  level = "dist",
  region_filter = "Barcelona",
  max_rows = 5000
)

# Check the data structure
head(mobility)
summary(mobility)
}
}
